import"./disclose-version.DsnmJJEf.js";import{a2 as ct,a3 as dt,a4 as lt,Y as ut,a5 as ft,d as vt,a6 as B,f as m,j as pt,a as h,p as xt,b as bt,s as p,g as r,e as ht,t as M,a7 as P,c as n,r as o,h as gt}from"./template.Db4iTBdM.js";import{s as z}from"./render.BJWVDL0r.js";import{i as T}from"./if.ComTaBIx.js";import{s as L}from"./attributes.K_mVEFX8.js";import{s as mt,a as x,i as g,b as O,c as R,d as D,e as j,f as S}from"./audioStore.pxsP-RqR.js";import"./index.wZLtXr5f.js";function F(i,d){return i===d||i?.[ft]===d}function _t(i={},d,l,$){return ct(()=>{var a,c;return dt(()=>{a=c,c=[],lt(()=>{i!==l(...c)&&(d(i,...c),a&&F(l(...a),i)&&d(null,...a))})}),()=>{ut(()=>{c&&F(l(...c),i)&&d(null,...c)})}}),i}var kt=m('<audio class="hidden"></audio>'),zt=m('<img alt="Cover" class="h-full w-full object-cover"/>'),$t=m('<div class="h-full w-full flex items-center justify-center bg-zinc-800 dark:bg-zinc-700 text-white dark:text-zinc-400 text-[8px]">PRS</div>'),wt=m('<div class="fixed bottom-4 right-4 z-50 w-72 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-xl p-3 flex items-center gap-3 animate-in slide-in-from-bottom-4 fade-in duration-300"><div class="h-12 w-12 bg-zinc-100 dark:bg-zinc-800 flex-shrink-0 overflow-hidden"><!></div> <div class="flex-1 min-w-0"><div class="text-xs font-bold truncate text-zinc-900 dark:text-zinc-100"> </div> <div class="flex items-center gap-2 text-[10px] font-mono text-zinc-500 dark:text-zinc-400 mt-1"><button class="hover:text-zinc-900 dark:hover:text-zinc-100 uppercase"> </button> <span>•</span> <span> </span></div></div> <div class="flex items-center gap-2"><button class="h-8 w-8 flex items-center justify-center bg-zinc-900 dark:bg-zinc-700 text-white hover:bg-orange-600 dark:hover:bg-orange-500 transition-colors"><span class="text-[10px]"> </span></button> <button class="h-8 w-8 flex items-center justify-center text-zinc-400 dark:text-zinc-500 hover:text-red-600 transition-colors" aria-label="Close"><span class="text-lg">×</span></button></div></div>'),yt=m("<!> <!>",1);function Ut(i,d){bt(d,!0);const l=()=>x(g,"$isPlaying",f),$=()=>x(O,"$isMuted",f),a=()=>x(R,"$currentTrack",f),c=()=>x(D,"$showMiniPlayer",f),G=()=>x(j,"$currentTime",f),H=()=>x(S,"$duration",f),[f,I]=mt();let t=ht(void 0);B(()=>{r(t)&&(l()&&r(t).paused?r(t).play().catch(()=>g.set(!1)):!l()&&!r(t).paused&&r(t).pause())}),B(()=>{r(t)&&(r(t).muted=$())});function J(){j.set(r(t).currentTime),S.set(r(t).duration)}function K(){g.set(!1),j.set(0)}function N(){g.update(e=>!e)}function Q(){g.set(!1),D.set(!1),R.set(null)}function V(){O.update(e=>!e)}var C=yt(),E=pt(C);{var W=e=>{var s=kt();_t(s,b=>gt(t,b),()=>r(t)),M(()=>{L(s,"src",a().src),s.autoplay=l()}),P("timeupdate",s,J),P("loadedmetadata",s,()=>S.set(r(t).duration)),P("ended",s,K),h(e,s)};T(E,e=>{a()&&e(W)})}var X=p(E,2);{var Z=e=>{var s=wt(),b=n(s),tt=n(b);{var at=u=>{var v=zt();M(()=>L(v,"src",a().cover)),h(u,v)},et=u=>{var v=$t();h(u,v)};T(tt,u=>{a().cover?u(at):u(et,!1)})}o(b);var w=p(b,2),y=n(w),st=n(y,!0);o(y);var U=p(y,2),_=n(U);_.__click=V;var rt=n(_,!0);o(_);var Y=p(_,4),it=n(Y);o(Y),o(U),o(w);var q=p(w,2),k=n(q);k.__click=N;var A=n(k),nt=n(A,!0);o(A),o(k);var ot=p(k,2);ot.__click=Q,o(q),o(s),M((u,v)=>{z(st,a().title),z(rt,$()?"Unmute":"Mute"),z(it,`${u??""}s / ${v??""}s`),z(nt,l()?"■":"▶")},[()=>Math.floor(G()),()=>Math.floor(H())]),h(e,s)};T(X,e=>{c()&&a()&&e(Z)})}h(i,C),xt(),I()}vt(["click"]);export{Ut as default};
